(this["webpackJsonpexchange-app"]=this["webpackJsonpexchange-app"]||[]).push([[0],{52:function(e,n,t){e.exports=t(82)},82:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),c=t(20),u=t(86),i=t(88),l=t(22),o=t.n(l),d=t(7),f=t(5);function s(){var e=Object(d.a)(["\n  display:flex;\n  flex-direction:column;\n  min-height: 100vh;\n  background-color: ",";\n  padding: 20px 40px;\n"]);return s=function(){return e},e}var m=f.a.div(s(),(function(e){return e.theme.colors.blue[900]})),b=t(84);function v(){var e=Object(d.a)(["\n  padding: 20px 0;\n  margin-bottom: 40px;\n"]);return v=function(){return e},e}var p=f.a.header(v()),g=function(){return r.a.createElement(p,null,r.a.createElement(b.a,{fontSize:"5xl",color:"white"},"Exchange"," ",r.a.createElement("span",{"aria-label":"money",role:"img"},"\ud83d\udcb0")))};function x(){var e=Object(d.a)(["\n  display: flex;\n  flex-direction: column;\n  max-width: 500px;\n  width: 100%;\n  margin: 0 auto;\n"]);return x=function(){return e},e}var h=f.a.div(x()),E=t(87),O=t(13),j=t(31),y=t.n(j),C=t(45),w=t(46),S=t.n(w),k=t(50),N=function(){var e=Object(C.a)(y.a.mark((function e(n,t){var a,r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.a.get("https://api.exchangeratesapi.io/latest?base=".concat(t));case 2:return a=e.sent,r=a.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),R=function(e){var n=e.base;return Object(k.a)(["rates",n],N,{refetchInterval:1e4})},V=t(21),B=t(32),I=Object(a.createContext)(),F=function(){return Object(a.useContext)(I)},U=function(e){var n=e.children,t=Object(a.useState)({USD:100,EUR:90,GBP:70}),c=Object(O.a)(t,2),u=c[0],i=c[1];return r.a.createElement(I.Provider,{value:{pocket:u,getBalance:function(e){return u[e]},makeExchange:function(e){var n=e.activeCurrency,t=e.tradeCurrency,a=e.inputValue,r=e.tradeValue;i((function(e){var c;return Object(B.a)(Object(B.a)({},e),{},(c={},Object(V.a)(c,n,Number(e[n])-Number(a)),Object(V.a)(c,t,Number(e[t])+Number(r)),c))}))}}},n)},L=Object(a.createContext)(),P=function(){return Object(a.useContext)(L)},z=function(e){var n=e.children,t=Object(a.useState)(["USD","EUR","GBP"]),c=Object(O.a)(t,1)[0],u=Object(a.useState)("USD"),i=Object(O.a)(u,2),l=i[0],o=i[1],d=Object(a.useState)("EUR"),f=Object(O.a)(d,2),s=f[0],m=f[1],b=Object(a.useState)(null),v=Object(O.a)(b,2),p=v[0],g=v[1],x=Object(a.useState)(0),h=Object(O.a)(x,2),E=h[0],j=h[1],y=Object(a.useState)(0),C=Object(O.a)(y,2),w=C[0],S=C[1],k=F().getBalance,N=R({base:l}),V=N.data,B=N.isLoading,I=R({base:s}),U=I.data,P=I.isLoading,z=Object(a.useCallback)((function(e){return e?w:E}),[w,E]),D=Object(a.useCallback)((function(){return!B&&(V.rates[s]||1)}),[B,V,s]),T=function(){return!P&&(U.rates[l]||1)};return Object(a.useEffect)((function(){S((z()*D()).toFixed(2))}),[D,z]),r.a.createElement(L.Provider,{value:{availableCurrencies:c,activeCurrency:l,tradeCurrency:s,getCurrency:function(e){return e?s:l},handleSwitchCurrency:function(){var e=l;o(s),m(e)},getCurrencyOptions:function(e){return c.filter((function(n){return e?n!==l:n!==s}))},activeRate:D(),tradeRate:T(),isLoadingRate:B||P,handleChangeCurrency:function(e,n){return e?m(n):o(n)},exchangeError:p,setExchangeError:g,validateExchange:function(e){var n=k(l);return Number(e)>Number(n)?g("Not enough balance"):g(null)},handleChangeValues:function(e,n){var t=e.indexOf(".")>=0?e.substr(0,e.indexOf("."))+e.substr(e.indexOf("."),3):e;n?(S(t),j((t*T).toFixed(2))):(S((t*D()).toFixed(2)),j(t))},getInputValue:z}},n)},D=function(e){var n=e.currencyType,t=e.trade,a=P(),c=a.availableCurrencies,u=a.handleChangeCurrency;return r.a.createElement(E.a,{padding:"0 0 0 10px",width:"100px",borderColor:"transparent",backgroundColor:"transparent",color:"white",value:n,onChange:function(e){u(t,e.target.value)},placeholder:"Select option"},c.map((function(e){return r.a.createElement("option",{key:e,value:e},e)})))},T=t(51);function G(){var e=Object(d.a)(["\n  display:flex;\n  flex-direction: row;\n  align-items: center;\n\n  ","\n"]);return G=function(){return e},e}function J(){var e=Object(d.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  max-width: 90px;\n  width: 100%;\n"]);return J=function(){return e},e}var A=f.a.div(J()),M=f.a.div(G(),(function(e){var n=e.isInvalid,t=e.theme;return n&&"border-bottom: 2px solid ".concat(t.colors.red[700])})),$=function(e){var n=e.trade,t=P(),c=t.validateExchange,u=t.handleChangeValues,i=t.getInputValue,l=Object(a.useState)(null),o=Object(O.a)(l,2),d=o[0],f=o[1];Object(a.useEffect)((function(){n||c(i())}),[i,c,n]);return r.a.createElement(A,null,r.a.createElement(M,{isInvalid:!!d},r.a.createElement(b.a,{color:"white"},n?"+":"-"),r.a.createElement(T.a,{textAlign:"right",color:"white",variant:"unstyled",type:"number",pattern:"^\\d*(\\.\\d{0,2})?$",onChange:function(e){!function(e,n){Number.isNaN(e)||Number.isNaN(parseFloat(e))?n(!0):n(null)}(e.target.value,f),u(e.target.value,n)},value:i(n),placeholder:"0",size:"md"})))};function q(){var e=Object(d.a)(["\n  background-color: ",";\n  width: 100%;\n  padding: 10px;\n  text-align: right;\n"]);return q=function(){return e},e}function H(){var e=Object(d.a)(["\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  justify-content: space-between;\n  width: 100%;\n  padding: 15px;\n  background-color: ","\n"]);return H=function(){return e},e}function K(){var e=Object(d.a)(["\n  display: flex;\n  flex-direction: column;\n  border-radius: 5px;\n  margin-bottom: 20px;\n  align-items: flex-end;\n  overflow: hidden;\n"]);return K=function(){return e},e}var Q=f.a.div(K()),W=f.a.div(H(),(function(e){return e.theme.colors.blue[800]})),X=f.a.div(q(),(function(e){return e.theme.colors.blue[700]})),Y=function(e){var n=e.trade,t=P().getCurrency,a=F().getBalance,c=t(n);return r.a.createElement(Q,null,r.a.createElement(W,null,r.a.createElement(D,{trade:n,currencyType:c}),r.a.createElement($,{trade:n})),r.a.createElement(X,null,r.a.createElement(b.a,{as:"i",fontSize:"sm",color:"blue.300"},"balance:"," ",a(c)+c)))},Z=t(85),_=t(28),ee=function(){var e=P(),n=e.activeRate,t=e.activeCurrency,a=e.tradeCurrency;return n?r.a.createElement(b.a,{marginRight:"10px"},"1".concat(t," = ").concat(n.toFixed(4)).concat(a)):null};function ne(){var e=Object(d.a)(["\n  margin-bottom: 20px;\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  justify-content: center;\n"]);return ne=function(){return e},e}var te=f.a.div(ne()),ae=function(){var e=P(),n=e.handleSwitchCurrency,t=e.isLoadingRate;return r.a.createElement(te,null,r.a.createElement(Z.a,{variantColor:"blue",variant:"outline",loadingText:"Fetching rate",isLoading:t,icon:"repeat",onClick:n},r.a.createElement(ee,null),r.a.createElement(_.a,{color:"teal",name:"repeat"})))};function re(){var e=Object(d.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n"]);return re=function(){return e},e}var ce=f.a.div(re()),ue=function(){var e=F().makeExchange,n=P(),t=n.activeCurrency,a=n.tradeCurrency,c=n.exchangeError,u=n.getInputValue;return r.a.createElement(ce,null,r.a.createElement(Z.a,{variantColor:"pink",marginBottom:"20px",disabled:t===a||!!c,onClick:function(){e({activeCurrency:t,tradeCurrency:a,inputValue:u(),tradeValue:u(!0)})}},"Exchange"),c&&r.a.createElement(b.a,{bg:"red.500",padding:"10px",color:"white"},c))},ie=function(){return r.a.createElement(h,null,r.a.createElement(z,null,r.a.createElement(Y,null),r.a.createElement(ae,null),r.a.createElement(Y,{trade:!0}),r.a.createElement(ue,null)))};var le=function(){return r.a.createElement(m,null,r.a.createElement(g,null),r.a.createElement(ie,null))};o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(c.a,{theme:u.a},r.a.createElement(i.a,null),r.a.createElement(U,null,r.a.createElement(le,null)))),document.getElementById("root"))}},[[52,1,2]]]);
//# sourceMappingURL=main.c6fdf6aa.chunk.js.map